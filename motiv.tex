\section{Motivation}
\label{motiv:sec}

\subsection{Motivating Examples}
\label{examples:sec}

\input{example1.tex}

Let us use a few real-world examples to motivate our approach.
Figure~\ref{fig:example1} displays a code snippet of an answer to an
SO question on Android library. Due to the discussion context in SO,
and its informal nature, code snippets rarely contain sufficient
declarations and references to the fully-qualified names (FQNs). The
code snippets are often missing neccessary import statements and the
references to the external types are also often unqualified (without
FQNs) since the responder assumes that those FQNs could be implicitly
understood in the context of the post. For example, in
Figure~\ref{fig:example1}, the types \code{Button}, \code{EditText},
\code{Bundle}, \code{View}, and \code{Log} are referenced by simple
names only. Thus, the code will not be compilable if the corresponding
import statements are not added.

\input{example2.tex}

Importantly, the name ambiguity occurs in the references to the APIs
of the external libraries. For example, the type \code{Button} at line
1 of Figure~\ref{fig:example1} is a common unqualified type name. In
this snippet, it refers to \code{android.widget.Button}. However, it
is easily ambiguous with other APIs in different libraries that
contain the same concept. For example, Figure~\ref{fig:example2} shows
a code snippet of an answer for an SO post on the Google Web Toolkit
(GWT). Because the code snippet contains no import statement, and the
references to the APIs are unqualified, the type \code{Button} at line
2 is ambiguous with the type of the same name at line 1 of
Figure~\ref{fig:example1} on Android library. The ambiguity in type
names is popular in code snippets in the forums, e.g., the
simple names \code{getId} occur 27,434 in various Java
libraries~\cite{liveapi14}.

\subsection{Observations and Key Ideas}
\label{sec:key-ideas}

To faciliate the reuse of the code snippets in a forum, an automated
tool is needed to derive the fully-qualified names of the program
elements in the snippets so that the proper import statements are
added in the code. To build such a tool, we draw the motivation from
the following observations.

\vspace{2pt}
\noindent {\bf Observation 1} [{\em Regularity of API Usages}]. The
designers of software libraries have the intents for developers to use
certain API elements together (including API classes, method calls,
field accesses) in certain combinations and orders to achieve some
programming tasks. Those API elements do not occur randomly. For
example, in Figure~\ref{fig:example2} at line 2, in GWT, a variable of
the type \code{Button} (FQN:
\code{com.google.gwt.user.client.ui.Button}) is instantiated. Then, at
line 3, to set the handler of that GWT button, one needs to have a
method call to \code{addClickHandler} (FQN:
\code{com.google.gwt.user.client.ui.Button.add\-Click\-Handler}) on
the \code{Button} object with a single argument of the type
\code{ClickHandler} (FQN:
\code{com\-.google\-.gwt\-.event\-.dom\-.client\-.ClickHandler}).
Those API elements are provided and intented to be used in such
usages, called {\em API usages}. Thus, those API elements of API
usages frequently appear together in the client code using the
library. Figure~\ref{fig:example3} shows a complete example published
in a GWT tutorial website \code{gwtproject.org}. Providing all the
proper \code{import} statements, the author shows how to use the GUI
elements in GWT including \code{Button}. Specifically, at line 23,
despite using a different variable name \code{addStockButton}, the
method \code{addClickHandler} is called on the Button declared at line
12 with the argument of the type \code{ClickHandler}. In brief, the
source code in the public code repositories could be a good source for
a model to implicitly learn the API usages to derive the FQNs for the
API elements in the given incomplete code snippet.

\vspace{2pt}
\noindent {\bf Observation 2} [{\em Dependencies/Relations in API
    Usages}]. The dependencies/relations among the API elements in a
API usage can help better identify the FQNs of the elements.  In
Figure~\ref{fig:example3}, the API elements \code{Button},
\code{addClickHandler}, and \code{ClickHandler} in GWT have the
program dependencies/relations among them. For example, ...



\input{example3.tex}


Key idea 1. Machine Learning implicitly learns the API usages. The
basis of regularity of AI usages in large training corpus.  The API
elements with their FQNs regularly appear together in API usages
higher impact in deciding the FQNs than the less regular ones.

Implicit learning with MLM.


Key idea 3. Span-based + Length, Embedding

